![Текст с описанием картинки](/lec_HW_5/images/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-01-29%20185047.png)

Как браузер использует DOM
Он разбивается на два больших этапа:
1. Анализ кода и построение модели визуализации (Render tree):   
   ● Получение HTML-документа по сети или чтение с локального диска.   
   ● Обработка HTML-кода и создание DOM, отправка дополнительных
запросов.   
    ● Обработка CSS-стилей и создание CSSOM.    
    ● Выполнение синхронного JavaScript-кода.
1. Прямая отрисовка страницы:   
    ● Создание макета страницы (Layout).

    ● Pастеризация или визуализация страницы на экране (Painting).

**Построение модели визуализации (Render tree)**

*DOM* — объектная модель всех элементов страницы. Собирается на основе

*HTML*-разметки страницы.

*CSSOM* — объектная модель таблицы стилей страницы. Собирается на
основе CSS-разметки страницы.

**Важно!** Модель визуализации, состоящая из DOM и CSSOM, содержит
только видимые элементы и не включает скрытых. Например, тех, в стилях
которых указано display: none.

***Построение DOM-модели***
    
    Построение DOM-модели делится на следующие этапы:

1. Преобразование. Браузер преобразует байты из HTML-файла, размещённого на диске или в сети, в символы, основываясь на приведённой в файле кодировке (например,
UTF-8).
2. Разметка. На основании стандарта W3C HTML5 браузер выделяет среди символов теги
в угловых скобках, такие как <html> и <body>. У каждого тега есть своё значение и
набор правил.
3. Создание объектов. HTML-тегами браузер выделяет в документе объекты с конкретными свойствами.
4. Формирование DOM. Объекты образуют древовидную структуру, повторяющую иерархию HTML-файла, в котором одни теги помещаются в другие. Так, объект p помещается под body, а объект body, в свою очередь, — под html, и так далее.
   
В результате создаётся объектная модель документа (DOM), которую использует браузер, чтобы продолжить обрабатывать страницу.
Итак, модель DOM готова. Но чтобы вывести страницу на экран, одной структуры объектов недостаточно. Браузер также определяет, как эти объекты выглядят.

***Рассмотрим следующий этап — формирование объектной модели, относящейся к таблице стилей (CSSOM).***

    Построение CSSOM-модели 

Объектная модель стилей (CSSOM) так же, как DOM, представлена в виде дерева объектов, со 
связанными стилями для каждого узла, независимо от того, объявлены они явно или
унаследованы неявно.
При схожести в обработке кода HTML и CSS стоит упомянуть, что CSS — блокирующий
рендеринг ресурс. Это означает, что модель визуализации не может быть построена до полной
обработки всех стилей на странице из-за особенностей их (стилей) каскадной реализации.
Стили, указанные далее в документе, переопределяют те, что определены до них. CSS также
блокирует выполнение JavaScript-кода, который ждёт формирования CSSOM.